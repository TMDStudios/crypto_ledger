{% extends 'base.html' %}

{% load humanize %}

{% block title %}
    ${{ bitcoin_price|floatformat:2|intcomma }} - API
{% endblock %}

{% block content %}

<br />
<h2 align="center">Crypto Ledger API</h2>
<br />
<hr style="height: 1px; margin: auto" />
<br />

<div style="padding-left: 20%; padding-right: 20%">
  <p>
    The Crypto Ledger API currently supports four different functions. You can either fetch live prices or use your API key 
    to access your personal ledger. You can also buy or sell coins.
  </p>
  <p>
    No API key is required to fetch coin prices. Simply use:
    <br />
    <mark>https://crypto-ledger.herokuapp.com/api/get-prices</mark>
  </p>
  <p>
    You will need an API key to see and/or modify your ledger. Click on the button below to generate your key.
  </p>
  <p>
    <strong style="color: red;"><u>Important:</u></strong> <b>Treat your API key like you would a password. Do not share it with
    anyone or display it publicly.</b>
  </p>
  <p>
    You can fetch your full ledger and buy/sell coins with the following URLs:
    <br />
    <p>
    View full ledger:
    <br />
    <mark>https://crypto-ledger.herokuapp.com/api/get-user-ledger/YOUR_API_KEY</mark>
    <br />
    Buy coins:
    <br />
    <mark>https://crypto-ledger.herokuapp.com/api/buy-coin-api/YOUR_API_KEY</mark>
    <br />
    Sell coins:
    <br />
    <mark>https://crypto-ledger.herokuapp.com/api/sell-coin-api/YOUR_API_KEY</mark>
    </p>
  </p>
</div>

{% if user.is_authenticated %}
<br />
{% if token %}
<div id="center-content">Your API Key: {{ token }}</div>
{% else %}
<div id="center-content">
  <form action="." method="POST">
    {% csrf_token %}
    <input
      type="submit"
      value="Get Token"
      class="btn btn-primary"
      style="width: 40%; height: 100%"
    />
  </form>
</div>
{% endif %}
<br />
<hr style="height: 1px; margin: auto" />
{% endif %} {% endblock %}
